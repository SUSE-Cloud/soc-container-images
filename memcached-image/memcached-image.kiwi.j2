<?xml version="1.0" encoding="UTF-8"?>
{{ header }}
<image xmlns:suse_label_helper="com.suse.label_helper" schemaversion="6.9" name="memcached-image">
  <description type="system">
    <author>{{ image.description.author }}</author>
    <contact>{{ image.description.contact }}</contact>
    <license>Apache-2.0</license>
    <specification>{{ image.description.long }}</specification>
  </description>
  <preferences>
    <type image="docker" derived_from="{{ derived_from }}">
      <containerconfig
          user="{{ image.containerconfig.user }}"
          additionaltags="{{ image.containerconfig.version.long }},{{ image.containerconfig.version.full }}"
          maintainer="{{ image.containerconfig.maintainer }}"
          name="{{namespace}}{{ image.containerconfig.name }}">
        <expose>
          {%- for e in image.containerconfig.expose %}
          <port number="{{ e }}"/>
          {%- endfor %}
        </expose>
        <subcommand execute="{{ image.containerconfig.subcommand }}"/>
        <entrypoint execute="{{ image.containerconfig.entrypoint }}"/>
        <labels>
          <label name="org.opencontainers.image.title" value="{{ image.description.short }}"/>
          <label name="org.opencontainers.image.description" value="{{ image.description.long }}"/>
          <label name="org.opencontainers.image.version" value="{{ image.containerconfig.version.full }}"/>
          <label name="org.opencontainers.image.created" value="%BUILDTIME%"/>
          <label name="org.openbuildservice.disturl" value="%DISTURL%"/>
        </labels>
        <history author="{{ image.description.author }}">{{ image.containerconfig.name }}</history>
      </containerconfig>
    </type>
    {{ image.preferences.basics }}
  </preferences>
  {{ image.repository }}
  <packages type="image">
    <package name="ca-certificates"/>
    <package name="memcached"/>
    {%- for pkg in packages.image %}
    <package name="{{ pkg }}"/>
    {%- endfor %}
  </packages>
</image>
